<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://github.com/Cirtus-AI/cirtusai_sdk/wallets/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Wallet Operations - CirtusAI SDK Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">CirtusAI SDK Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../quickstart/" class="nav-link">Quick Start</a>
                            </li>
                            <li class="nav-item">
                                <a href="../authentication/" class="nav-link">Authentication</a>
                            </li>
                            <li class="nav-item">
                                <a href="../agents/" class="nav-link">Agent Management</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Wallet Operations</a>
                            </li>
                            <li class="nav-item">
                                <a href="../email/" class="nav-link">Email Services</a>
                            </li>
                            <li class="nav-item">
                                <a href="../security/" class="nav-link">Security & Compliance</a>
                            </li>
                            <li class="nav-item">
                                <a href="../blockchain/" class="nav-link">Blockchain Infrastructure</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../agents/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../email/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/Cirtus-AI/cirtusai_sdk/edit/master/docs/wallets.md" class="nav-link"><i class="fa-brands fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#cirtusai-sdk-wallet-management-guide" class="nav-link">CirtusAI SDK Wallet Management Guide</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#features" class="nav-link">Features</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#basic-wallet-operations" class="nav-link">Basic Wallet Operations</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#transaction-operations" class="nav-link">Transaction Operations</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#gas-management" class="nav-link">Gas Management</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#fiat-onramp-integration" class="nav-link">Fiat Onramp Integration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#real-world-assets-rwa" class="nav-link">Real World Assets (RWA)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#defi-yield-strategies" class="nav-link">DeFi Yield Strategies</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#event-monitoring" class="nav-link">Event Monitoring</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#agent-wallets-smart-contract-wallets" class="nav-link">Agent Wallets (Smart Contract Wallets)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#account-abstraction-erc-4337" class="nav-link">Account Abstraction (ERC-4337)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#email-integration" class="nav-link">Email Integration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#advanced-wallet-workflows" class="nav-link">Advanced Wallet Workflows</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#error-handling-and-best-practices" class="nav-link">Error Handling and Best Practices</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#api-reference" class="nav-link">API Reference</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="cirtusai-sdk-wallet-management-guide">CirtusAI SDK Wallet Management Guide</h1>
<h2 id="overview">Overview</h2>
<p>The CirtusAI SDK provides comprehensive wallet management capabilities including crypto wallet operations, asset management, email integration, RWA (Real World Assets) support, DeFi yield strategies, and advanced features like gas sponsorship and agent wallets.</p>
<h2 id="features">Features</h2>
<ul>
<li><strong>Multi-Chain Wallet Support</strong>: Create and manage wallets across multiple blockchains</li>
<li><strong>Asset Management</strong>: Track and manage crypto assets and email accounts</li>
<li><strong>Transaction Management</strong>: Send transactions, check balances, and monitor activity</li>
<li><strong>Gas Sponsorship</strong>: Sponsor gas fees for improved user experience</li>
<li><strong>Onramp Integration</strong>: Fiat-to-crypto conversion support</li>
<li><strong>RWA Asset Registry</strong>: Register and manage real-world assets</li>
<li><strong>DeFi Yield Strategies</strong>: Automated yield farming and strategy execution</li>
<li><strong>Event Subscriptions</strong>: Real-time blockchain event monitoring</li>
<li><strong>Agent Wallets</strong>: Smart contract wallets with programmable controls</li>
<li><strong>Account Abstraction</strong>: ERC-4337 user operations support</li>
</ul>
<h2 id="basic-wallet-operations">Basic Wallet Operations</h2>
<h3 id="create-and-manage-wallets">Create and Manage Wallets</h3>
<pre><code class="language-python">from cirtusai import CirtusAIClient

client = CirtusAIClient(&quot;https://api.cirtusai.com&quot;)
client.set_token(&quot;your_access_token&quot;)

# Create a new wallet
wallet = client.wallets.create_wallet(chain=&quot;ethereum&quot;)
print(f&quot;New wallet address: {wallet['address']}&quot;)
print(f&quot;Chain: {wallet['chain']}&quot;)

# Import existing wallet
imported_wallet = client.wallets.import_wallet(
    chain=&quot;ethereum&quot;,
    private_key=&quot;your_private_key_hex&quot;
)

# List all wallets
wallets = client.wallets.list_wallets()
for wallet in wallets:
    print(f&quot;Wallet ID: {wallet['id']}&quot;)
    print(f&quot;Address: {wallet['address']}&quot;)
    print(f&quot;Chain: {wallet['chain']}&quot;)

# Delete wallet
client.wallets.delete_wallet(&quot;wallet_id&quot;)
</code></pre>
<h3 id="asset-management">Asset Management</h3>
<pre><code class="language-python"># List all assets
assets = client.wallets.list_assets()
print(f&quot;Total assets: {len(assets)}&quot;)

# Add individual asset
client.wallets.add_asset(
    asset_key=&quot;BTC_ADDRESS&quot;,
    asset_value=&quot;1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa&quot;
)

# Bulk add assets
assets_dict = {
    &quot;ETH_ADDRESS&quot;: &quot;0x742d35Cc6635C0532925a3b8D&quot;,
    &quot;USDC_ADDRESS&quot;: &quot;0xA0b86a33E6c3b&quot;,
    &quot;API_KEY&quot;: &quot;your_api_key_here&quot;
}
client.wallets.bulk_add_assets(assets_dict)

# Add crypto wallet to assets
crypto_asset = client.wallets.add_crypto(chain=&quot;ethereum&quot;)
print(f&quot;Crypto wallet added: {crypto_asset}&quot;)
</code></pre>
<h2 id="transaction-operations">Transaction Operations</h2>
<h3 id="token-operations">Token Operations</h3>
<pre><code class="language-python"># Get token balance
balance = client.wallets.get_token_balance(
    wallet_id=&quot;wallet_123&quot;,
    token_address=&quot;0xA0b86a33E6c3b&quot;  # USDC
)
print(f&quot;Token balance: {balance}&quot;)

# Transfer tokens
transfer_result = client.wallets.transfer_tokens(
    wallet_id=&quot;wallet_123&quot;,
    token_address=&quot;0xA0b86a33E6c3b&quot;,
    to_address=&quot;0x742d35Cc6635C0532925a3b8D&quot;,
    amount=100.0
)
print(f&quot;Transfer hash: {transfer_result['transaction_hash']}&quot;)

# Approve token spending
approval_result = client.wallets.approve_tokens(
    wallet_id=&quot;wallet_123&quot;,
    token_address=&quot;0xA0b86a33E6c3b&quot;,
    spender_address=&quot;0x1234567890123456789012345678901234567890&quot;,
    amount=1000.0
)
</code></pre>
<h3 id="native-currency-operations">Native Currency Operations</h3>
<pre><code class="language-python"># Get native balance (ETH, MATIC, etc.)
balance = client.wallets.get_balance(
    chain=&quot;ethereum&quot;,
    address=&quot;0x742d35Cc6635C0532925a3b8D&quot;
)
print(f&quot;ETH balance: {balance}&quot;)

# Send raw transaction
tx_hash = client.wallets.send_transaction(
    chain=&quot;ethereum&quot;,
    to=&quot;0x742d35Cc6635C0532925a3b8D&quot;,
    signed_tx=&quot;0x1234567890abcdef&quot;  # Pre-signed transaction
)
print(f&quot;Transaction hash: {tx_hash}&quot;)
</code></pre>
<h2 id="gas-management">Gas Management</h2>
<h3 id="gas-sponsorship">Gas Sponsorship</h3>
<pre><code class="language-python"># Sponsor gas for token transactions
sponsorship_hash = client.wallets.sponsor_gas(
    token_address=&quot;0xA0b86a33E6c3b&quot;,
    amount=Decimal(&quot;100.0&quot;)
)
print(f&quot;Gas sponsorship transaction: {sponsorship_hash}&quot;)

# Check gas sponsorship balance
sponsorship_balance = client.wallets.get_gas_sponsorship_balance()
print(f&quot;Available gas sponsorship: {sponsorship_balance}&quot;)
</code></pre>
<h2 id="fiat-onramp-integration">Fiat Onramp Integration</h2>
<h3 id="create-onramp-session">Create Onramp Session</h3>
<pre><code class="language-python"># Create fiat-to-crypto onramp session
onramp_session = client.wallets.create_onramp_session(
    currency=&quot;USD&quot;,
    amount=500.0
)

print(f&quot;Session ID: {onramp_session['session_id']}&quot;)
print(f&quot;Payment URL: {onramp_session['payment_url']}&quot;)
print(f&quot;Status: {onramp_session['status']}&quot;)

# Check onramp status
status = client.wallets.get_onramp_status(onramp_session['session_id'])
print(f&quot;Onramp status: {status['status']}&quot;)
print(f&quot;Amount received: {status.get('amount_received', 0)}&quot;)
</code></pre>
<h2 id="real-world-assets-rwa">Real World Assets (RWA)</h2>
<h3 id="rwa-asset-management">RWA Asset Management</h3>
<pre><code class="language-python"># Register RWA asset
rwa_asset = client.wallets.register_rwa_asset(
    token_address=&quot;0x1234567890123456789012345678901234567890&quot;,
    token_id=&quot;123&quot;,
    metadata_uri=&quot;https://metadata.example.com/asset/123&quot;
)

print(f&quot;RWA Asset registered: {rwa_asset['asset_id']}&quot;)
print(f&quot;Status: {rwa_asset['status']}&quot;)

# List all RWA assets
rwa_assets = client.wallets.list_rwa_assets()
for asset in rwa_assets:
    print(f&quot;Asset ID: {asset['asset_id']}&quot;)
    print(f&quot;Token Address: {asset['token_address']}&quot;)
    print(f&quot;Token ID: {asset['token_id']}&quot;)

# Transfer RWA asset
transfer_hash = client.wallets.transfer_rwa_asset(
    asset_id=&quot;rwa_asset_123&quot;,
    to_address=&quot;0x742d35Cc6635C0532925a3b8D&quot;
)
print(f&quot;RWA transfer hash: {transfer_hash}&quot;)
</code></pre>
<h2 id="defi-yield-strategies">DeFi Yield Strategies</h2>
<h3 id="yield-strategy-management">Yield Strategy Management</h3>
<pre><code class="language-python"># Create yield strategy
strategy = client.wallets.create_yield_strategy(
    asset_key=&quot;USDC_BALANCE&quot;,
    protocol=&quot;aave&quot;,
    min_apr=Decimal(&quot;5.0&quot;)  # 5% minimum APR
)

print(f&quot;Strategy ID: {strategy['strategy_id']}&quot;)
print(f&quot;Protocol: {strategy['protocol']}&quot;)
print(f&quot;Target APR: {strategy['target_apr']}&quot;)

# List all yield strategies
strategies = client.wallets.list_yield_strategies()
for strategy in strategies:
    print(f&quot;Strategy: {strategy['strategy_id']}&quot;)
    print(f&quot;Asset: {strategy['asset_key']}&quot;)
    print(f&quot;Current APR: {strategy['current_apr']}&quot;)

# Execute yield strategy
execution_result = client.wallets.run_yield_strategy(&quot;strategy_123&quot;)
print(f&quot;Execution status: {execution_result['status']}&quot;)
print(f&quot;Amount deployed: {execution_result['amount_deployed']}&quot;)
</code></pre>
<h2 id="event-monitoring">Event Monitoring</h2>
<h3 id="blockchain-event-subscriptions">Blockchain Event Subscriptions</h3>
<pre><code class="language-python"># Subscribe to blockchain events
subscription_id = client.wallets.subscribe_event(
    chain=&quot;ethereum&quot;,
    filter_criteria={
        &quot;address&quot;: &quot;0x1234567890123456789012345678901234567890&quot;,
        &quot;topics&quot;: [&quot;Transfer(address,address,uint256)&quot;]
    },
    callback_url=&quot;https://your-webhook.com/events&quot;
)

print(f&quot;Subscription ID: {subscription_id}&quot;)

# List active subscriptions
subscriptions = client.wallets.list_event_subscriptions()
for sub in subscriptions:
    print(f&quot;Subscription: {sub['subscription_id']}&quot;)
    print(f&quot;Chain: {sub['chain']}&quot;)
    print(f&quot;Status: {sub['status']}&quot;)

# Unsubscribe from events
client.wallets.unsubscribe_event(subscription_id)
</code></pre>
<h2 id="agent-wallets-smart-contract-wallets">Agent Wallets (Smart Contract Wallets)</h2>
<h3 id="deploy-and-manage-agent-wallets">Deploy and Manage Agent Wallets</h3>
<pre><code class="language-python"># Deploy new agent wallet
agent_wallet = client.wallets.deploy_agent_wallet()
print(f&quot;Agent wallet address: {agent_wallet['address']}&quot;)
print(f&quot;Deployment hash: {agent_wallet['deployment_hash']}&quot;)

# List all agent wallets
agent_wallets = client.wallets.list_agent_wallets()
for wallet in agent_wallets:
    print(f&quot;Address: {wallet['address']}&quot;)
    print(f&quot;Owner: {wallet['owner']}&quot;)
    print(f&quot;Threshold: {wallet['threshold']}&quot;)

# Get specific agent wallet details
wallet_details = client.wallets.get_agent_wallet(&quot;0x1234567890123456789012345678901234567890&quot;)
print(f&quot;Spending limits: {wallet_details['spending_limits']}&quot;)
print(f&quot;Whitelist: {wallet_details['whitelist']}&quot;)
</code></pre>
<h3 id="agent-wallet-configuration">Agent Wallet Configuration</h3>
<pre><code class="language-python"># Set spending limits
limit_hash = client.wallets.set_spending_limit(
    address=&quot;0x1234567890123456789012345678901234567890&quot;,
    token=&quot;0xA0b86a33E6c3b&quot;,  # USDC
    amount=1000,  # 1000 USDC
    period=86400  # 24 hours
)

# Update whitelist
whitelist_hash = client.wallets.update_whitelist(
    address=&quot;0x1234567890123456789012345678901234567890&quot;,
    target=&quot;0x742d35Cc6635C0532925a3b8D&quot;,
    allowed=True
)

# Set multi-sig threshold
threshold_hash = client.wallets.set_threshold(
    address=&quot;0x1234567890123456789012345678901234567890&quot;,
    new_threshold=2  # Require 2 signatures
)
</code></pre>
<h3 id="agent-wallet-transactions">Agent Wallet Transactions</h3>
<pre><code class="language-python"># List wallet transactions
transactions = client.wallets.list_wallet_transactions(
    address=&quot;0x1234567890123456789012345678901234567890&quot;
)

for tx in transactions:
    print(f&quot;Hash: {tx['hash']}&quot;)
    print(f&quot;To: {tx['to']}&quot;)
    print(f&quot;Value: {tx['value']}&quot;)
    print(f&quot;Status: {tx['status']}&quot;)
</code></pre>
<h2 id="account-abstraction-erc-4337">Account Abstraction (ERC-4337)</h2>
<h3 id="user-operations">User Operations</h3>
<pre><code class="language-python"># Send user operation
user_op = {
    &quot;sender&quot;: &quot;0x1234567890123456789012345678901234567890&quot;,
    &quot;nonce&quot;: &quot;0x1&quot;,
    &quot;initCode&quot;: &quot;0x&quot;,
    &quot;callData&quot;: &quot;0xa9059cbb000000000000000000000000742d35cc6635c0532925a3b8d00000000000000000000000000000000000000000000000000000000000000064&quot;,
    &quot;callGasLimit&quot;: &quot;0x5208&quot;,
    &quot;verificationGasLimit&quot;: &quot;0x186a0&quot;,
    &quot;preVerificationGas&quot;: &quot;0x5208&quot;,
    &quot;maxFeePerGas&quot;: &quot;0x77359400&quot;,
    &quot;maxPriorityFeePerGas&quot;: &quot;0x77359400&quot;,
    &quot;paymasterAndData&quot;: &quot;0x&quot;,
    &quot;signature&quot;: &quot;0x...&quot;
}

result = client.wallets.send_user_operation(
    user_op=user_op,
    entry_point_address=&quot;0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789&quot;
)

print(f&quot;User operation hash: {result['userOpHash']}&quot;)

# Check user operation status
status = client.wallets.get_user_operation_status(result['userOpHash'])
print(f&quot;Status: {status['status']}&quot;)
print(f&quot;Transaction hash: {status.get('transactionHash')}&quot;)
</code></pre>
<h2 id="email-integration">Email Integration</h2>
<h3 id="email-account-management">Email Account Management</h3>
<pre><code class="language-python"># List email accounts
email_accounts = client.wallets.list_email_accounts()
for account in email_accounts:
    print(f&quot;Account ID: {account['id']}&quot;)
    print(f&quot;Email: {account['email_address']}&quot;)
    print(f&quot;Provider: {account['provider']}&quot;)

# Create email account
email_account = client.wallets.create_email_account(
    provider=&quot;gmail&quot;,
    email_address=&quot;user@gmail.com&quot;,
    config={
        &quot;refresh_token&quot;: &quot;your_refresh_token&quot;,
        &quot;client_id&quot;: &quot;your_client_id&quot;,
        &quot;client_secret&quot;: &quot;your_client_secret&quot;
    }
)

# Get specific email account
account = client.wallets.get_email_account(&quot;account_123&quot;)
print(f&quot;Email: {account['email_address']}&quot;)
print(f&quot;Status: {account['status']}&quot;)

# Update email account
updated_account = client.wallets.update_email_account(
    account_id=&quot;account_123&quot;,
    provider=&quot;gmail&quot;,
    email_address=&quot;updated@gmail.com&quot;,
    config={&quot;refresh_token&quot;: &quot;new_refresh_token&quot;}
)

# Refresh email token
refreshed = client.wallets.refresh_email_token(&quot;account_123&quot;)
print(f&quot;Token refreshed: {refreshed['success']}&quot;)

# Delete email account
client.wallets.delete_email_account(&quot;account_123&quot;)
</code></pre>
<h2 id="advanced-wallet-workflows">Advanced Wallet Workflows</h2>
<h3 id="multi-chain-portfolio-management">Multi-Chain Portfolio Management</h3>
<pre><code class="language-python">def manage_multi_chain_portfolio(client):
    &quot;&quot;&quot;Manage assets across multiple chains&quot;&quot;&quot;

    # Create wallets on different chains
    chains = [&quot;ethereum&quot;, &quot;polygon&quot;, &quot;arbitrum&quot;]
    wallets = {}

    for chain in chains:
        wallet = client.wallets.create_wallet(chain=chain)
        wallets[chain] = wallet
        print(f&quot;Created {chain} wallet: {wallet['address']}&quot;)

    # Check balances across all chains
    portfolio = {}
    for chain, wallet in wallets.items():
        try:
            balance = client.wallets.get_balance(chain, wallet['address'])
            portfolio[chain] = balance
        except Exception as e:
            print(f&quot;Error getting {chain} balance: {e}&quot;)
            portfolio[chain] = 0

    return portfolio

# Usage
portfolio = manage_multi_chain_portfolio(client)
print(f&quot;Portfolio balances: {portfolio}&quot;)
</code></pre>
<h3 id="automated-yield-farming">Automated Yield Farming</h3>
<pre><code class="language-python">def setup_yield_farming(client, asset_allocation):
    &quot;&quot;&quot;Setup automated yield farming across protocols&quot;&quot;&quot;

    strategies = []

    for asset, config in asset_allocation.items():
        try:
            strategy = client.wallets.create_yield_strategy(
                asset_key=asset,
                protocol=config[&quot;protocol&quot;],
                min_apr=config[&quot;min_apr&quot;]
            )
            strategies.append(strategy)

            # Execute strategy immediately if configured
            if config.get(&quot;auto_execute&quot;, False):
                result = client.wallets.run_yield_strategy(strategy['strategy_id'])
                print(f&quot;Executed strategy {strategy['strategy_id']}: {result['status']}&quot;)

        except Exception as e:
            print(f&quot;Failed to create strategy for {asset}: {e}&quot;)

    return strategies

# Usage
allocation = {
    &quot;USDC_BALANCE&quot;: {
        &quot;protocol&quot;: &quot;aave&quot;,
        &quot;min_apr&quot;: Decimal(&quot;4.0&quot;),
        &quot;auto_execute&quot;: True
    },
    &quot;ETH_BALANCE&quot;: {
        &quot;protocol&quot;: &quot;compound&quot;,
        &quot;min_apr&quot;: Decimal(&quot;3.5&quot;),
        &quot;auto_execute&quot;: False
    }
}

strategies = setup_yield_farming(client, allocation)
</code></pre>
<h3 id="smart-contract-interaction">Smart Contract Interaction</h3>
<pre><code class="language-python">def deploy_and_configure_agent_wallet(client, config):
    &quot;&quot;&quot;Deploy and fully configure an agent wallet&quot;&quot;&quot;

    # Deploy agent wallet
    wallet = client.wallets.deploy_agent_wallet()
    address = wallet['address']

    print(f&quot;Deployed agent wallet: {address}&quot;)

    # Configure spending limits
    for token, limit_config in config['spending_limits'].items():
        client.wallets.set_spending_limit(
            address=address,
            token=token,
            amount=limit_config['amount'],
            period=limit_config['period']
        )

    # Setup whitelist
    for target in config['whitelist']:
        client.wallets.update_whitelist(
            address=address,
            target=target,
            allowed=True
        )

    # Set multi-sig threshold
    if config.get('threshold'):
        client.wallets.set_threshold(address, config['threshold'])

    return wallet

# Usage
wallet_config = {
    &quot;spending_limits&quot;: {
        &quot;0xA0b86a33E6c3b&quot;: {&quot;amount&quot;: 1000, &quot;period&quot;: 86400},  # USDC daily limit
        &quot;0x0000000000000000000000000000000000000000&quot;: {&quot;amount&quot;: 1, &quot;period&quot;: 86400}  # ETH daily limit
    },
    &quot;whitelist&quot;: [
        &quot;0x742d35Cc6635C0532925a3b8D&quot;,
        &quot;0x1234567890123456789012345678901234567890&quot;
    ],
    &quot;threshold&quot;: 2
}

agent_wallet = deploy_and_configure_agent_wallet(client, wallet_config)
</code></pre>
<h2 id="error-handling-and-best-practices">Error Handling and Best Practices</h2>
<h3 id="transaction-safety">Transaction Safety</h3>
<pre><code class="language-python">def safe_token_transfer(client, wallet_id, token_address, to_address, amount):
    &quot;&quot;&quot;Safely execute token transfer with checks&quot;&quot;&quot;

    try:
        # Check balance first
        balance = client.wallets.get_token_balance(wallet_id, token_address)

        if balance['balance'] &lt; amount:
            return {&quot;success&quot;: False, &quot;error&quot;: &quot;Insufficient balance&quot;}

        # Execute transfer
        result = client.wallets.transfer_tokens(
            wallet_id=wallet_id,
            token_address=token_address,
            to_address=to_address,
            amount=amount
        )

        return {&quot;success&quot;: True, &quot;transaction_hash&quot;: result['transaction_hash']}

    except Exception as e:
        return {&quot;success&quot;: False, &quot;error&quot;: str(e)}

# Usage
result = safe_token_transfer(
    client, &quot;wallet_123&quot;, &quot;0xA0b86a33E6c3b&quot;, 
    &quot;0x742d35Cc6635C0532925a3b8D&quot;, 100.0
)

if result[&quot;success&quot;]:
    print(f&quot;Transfer successful: {result['transaction_hash']}&quot;)
else:
    print(f&quot;Transfer failed: {result['error']}&quot;)
</code></pre>
<h3 id="gas-optimization">Gas Optimization</h3>
<pre><code class="language-python">def optimize_gas_usage(client, operations):
    &quot;&quot;&quot;Optimize gas usage for multiple operations&quot;&quot;&quot;

    # Check gas sponsorship balance
    sponsorship_balance = client.wallets.get_gas_sponsorship_balance()

    if sponsorship_balance &gt; 0:
        print(f&quot;Using gas sponsorship: {sponsorship_balance} available&quot;)

        # Execute operations using sponsored gas
        for op in operations:
            try:
                if op['type'] == 'transfer':
                    result = client.wallets.transfer_tokens(**op['params'])
                    print(f&quot;Sponsored transfer: {result['transaction_hash']}&quot;)
            except Exception as e:
                print(f&quot;Operation failed: {e}&quot;)
    else:
        print(&quot;No gas sponsorship available, using regular gas&quot;)
        # Execute operations normally

# Usage
operations = [
    {
        &quot;type&quot;: &quot;transfer&quot;,
        &quot;params&quot;: {
            &quot;wallet_id&quot;: &quot;wallet_123&quot;,
            &quot;token_address&quot;: &quot;0xA0b86a33E6c3b&quot;,
            &quot;to_address&quot;: &quot;0x742d35Cc6635C0532925a3b8D&quot;,
            &quot;amount&quot;: 50.0
        }
    }
]

optimize_gas_usage(client, operations)
</code></pre>
<h2 id="api-reference">API Reference</h2>
<h3 id="walletsclient-methods">WalletsClient Methods</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Parameters</th>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>create_wallet()</code></td>
<td>Create new wallet</td>
<td>chain</td>
<td>Dict</td>
</tr>
<tr>
<td><code>import_wallet()</code></td>
<td>Import existing wallet</td>
<td>chain, private_key</td>
<td>Dict</td>
</tr>
<tr>
<td><code>list_wallets()</code></td>
<td>List all wallets</td>
<td>-</td>
<td>List[Dict]</td>
</tr>
<tr>
<td><code>delete_wallet()</code></td>
<td>Delete wallet</td>
<td>wallet_id</td>
<td>None</td>
</tr>
<tr>
<td><code>get_token_balance()</code></td>
<td>Get token balance</td>
<td>wallet_id, token_address</td>
<td>Dict</td>
</tr>
<tr>
<td><code>transfer_tokens()</code></td>
<td>Transfer tokens</td>
<td>wallet_id, token_address, to_address, amount</td>
<td>Dict</td>
</tr>
<tr>
<td><code>approve_tokens()</code></td>
<td>Approve token spending</td>
<td>wallet_id, token_address, spender_address, amount</td>
<td>Dict</td>
</tr>
<tr>
<td><code>get_balance()</code></td>
<td>Get native currency balance</td>
<td>chain, address</td>
<td>Decimal</td>
</tr>
<tr>
<td><code>send_transaction()</code></td>
<td>Send raw transaction</td>
<td>chain, to, signed_tx</td>
<td>str</td>
</tr>
<tr>
<td><code>sponsor_gas()</code></td>
<td>Sponsor gas fees</td>
<td>token_address, amount</td>
<td>str</td>
</tr>
<tr>
<td><code>get_gas_sponsorship_balance()</code></td>
<td>Get sponsorship balance</td>
<td>-</td>
<td>Decimal</td>
</tr>
<tr>
<td><code>create_onramp_session()</code></td>
<td>Create fiat onramp</td>
<td>currency, amount</td>
<td>Dict</td>
</tr>
<tr>
<td><code>get_onramp_status()</code></td>
<td>Check onramp status</td>
<td>session_id</td>
<td>Dict</td>
</tr>
<tr>
<td><code>register_rwa_asset()</code></td>
<td>Register RWA asset</td>
<td>token_address, token_id, metadata_uri</td>
<td>Dict</td>
</tr>
<tr>
<td><code>list_rwa_assets()</code></td>
<td>List RWA assets</td>
<td>-</td>
<td>List[Dict]</td>
</tr>
<tr>
<td><code>transfer_rwa_asset()</code></td>
<td>Transfer RWA asset</td>
<td>asset_id, to_address</td>
<td>str</td>
</tr>
<tr>
<td><code>create_yield_strategy()</code></td>
<td>Create yield strategy</td>
<td>asset_key, protocol, min_apr</td>
<td>Dict</td>
</tr>
<tr>
<td><code>list_yield_strategies()</code></td>
<td>List yield strategies</td>
<td>-</td>
<td>List[Dict]</td>
</tr>
<tr>
<td><code>run_yield_strategy()</code></td>
<td>Execute yield strategy</td>
<td>strategy_id</td>
<td>Dict</td>
</tr>
<tr>
<td><code>subscribe_event()</code></td>
<td>Subscribe to events</td>
<td>chain, filter_criteria, callback_url</td>
<td>str</td>
</tr>
<tr>
<td><code>list_event_subscriptions()</code></td>
<td>List subscriptions</td>
<td>-</td>
<td>List[Dict]</td>
</tr>
<tr>
<td><code>unsubscribe_event()</code></td>
<td>Unsubscribe from events</td>
<td>subscription_id</td>
<td>None</td>
</tr>
<tr>
<td><code>deploy_agent_wallet()</code></td>
<td>Deploy agent wallet</td>
<td>-</td>
<td>Dict</td>
</tr>
<tr>
<td><code>list_agent_wallets()</code></td>
<td>List agent wallets</td>
<td>-</td>
<td>List[Dict]</td>
</tr>
<tr>
<td><code>get_agent_wallet()</code></td>
<td>Get agent wallet details</td>
<td>address</td>
<td>Dict</td>
</tr>
<tr>
<td><code>set_spending_limit()</code></td>
<td>Set spending limit</td>
<td>address, token, amount, period</td>
<td>str</td>
</tr>
<tr>
<td><code>update_whitelist()</code></td>
<td>Update whitelist</td>
<td>address, target, allowed</td>
<td>str</td>
</tr>
<tr>
<td><code>set_threshold()</code></td>
<td>Set multi-sig threshold</td>
<td>address, new_threshold</td>
<td>str</td>
</tr>
<tr>
<td><code>list_wallet_transactions()</code></td>
<td>List wallet transactions</td>
<td>address</td>
<td>List[Dict]</td>
</tr>
<tr>
<td><code>send_user_operation()</code></td>
<td>Send user operation</td>
<td>user_op, entry_point_address</td>
<td>Dict</td>
</tr>
<tr>
<td><code>get_user_operation_status()</code></td>
<td>Get user op status</td>
<td>user_op_hash</td>
<td>Dict</td>
</tr>
</tbody>
</table></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
